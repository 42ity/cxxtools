#! /bin/sh

prefix=@prefix@
exec_prefix=@exec_prefix@
includedir=@includedir@
libdir=@libdir@

usage()
{
    cat <<EOF
Usage: $0 [OPTION]

Known values for OPTION are:

  --libs            print library linking information
  --log-libs        print linking information for cxxtools metalogging
  --cxxflags        print pre-processor and compiler flags
  --logging         configured logging type
  --properties app  print logging-properties-template for application "app"
  --help            display this help and exit
  --version         output version information
EOF

    exit $1
}

log4cxx_template()
{
  cat <<EOF
log4j.rootLogger=WARN, file
log4j.logger.APP=INFO

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=TTCCLayout
log4j.appender.console.layout.DateFormat=ISO8601

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=APP.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=2
log4j.appender.file.layout=TTCCLayout
log4j.appender.file.layout.ContextPrinting=enabled
log4j.appender.file.layout.DateFormat=ISO8601
EOF
}

log4cplus_template()
{
  cat <<EOF
log4cplus.rootLogger=WARN, file
log4cplus.logger.APP=INFO

log4cplus.appender.console=log4cplus::ConsoleAppender
log4cplus.appender.console.layout=log4cplus::TTCCLayout
log4cplus.appender.console.ImmediateFlush=true

log4cplus.appender.file=log4cplus::RollingFileAppender
log4cplus.appender.file.File=APP.log
log4cplus.appender.file.layout=log4cplus::TTCCLayout
log4cplus.appender.file.MaxFileSize=500KB
log4cplus.appender.file.MaxBackupIndex=5
log4cplus.appender.file.ImmediateFlush=true
EOF
}

simple_template()
{
  cat <<EOF
rootLogger=WARN
logger.APP=INFO
#file=APP.log
EOF
}

disabled_template()
{
  :
}

if test $# -eq 0; then
    usage
fi

cflags=false
libs=false

while test $# -gt 0; do
    case "$1" in

    --version)
        echo @VERSION@
        exit 0
        ;;

    --help)
        usage
        ;;

    --cxxflags)
        echo @CXXTOOLS_CXXFLAGS@
        ;;

    --log-libs)
        echo @CXXTOOLS_LDFLAGS@ @CXXTOOLS_LOG_LDFLAGS@
        ;;

    --libs)
        echo @CXXTOOLS_LDFLAGS@ 
        ;;

    --logging)
        echo @CXXTOOLS_LOGGING@ 
        ;;

    --properties)
        if test $# -gt 1
        then
          @CXXTOOLS_LOGGING@_template | sed "s/APP/$2/"
          shift
        else
          usage
        fi
        ;;

    *)
        usage
        exit 1
        ;;
    esac
    shift
done

exit 0
